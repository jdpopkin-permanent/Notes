<h1>notes</h1>

<label> Search <input type="text" name="search[query]"> </label>

<%= link_to "Artists", artists_url %>
<%= link_to "Albums", albums_url %>
<%= link_to "Songs", songs_url %>

<!-- <% if current_user %>
  <a id="login-link" class="hidden" href="#/sign_in">Sign In</a>
  <a id="logout-link" href="#/sign_out">Log Out</a>
<% else %>
  <a id="login-link" href="#/sign_in">Sign In</a>
  <a id="logout-link" class="hidden" href="#/sign_out">Log Out</a>
<% end %>

<form id="login" class="hidden" action="<%= session_url %>" method="POST">
  <label>Username <input type="text" name="user[username]"></label>
  <label>Password <input type="password" name="user[password]"></label>
  <input type="submit" value="Sign In">
  <a id="signup-link" href="#<%#= new_user_url %>">Sign Up</a>
</form>

<form id="signup" class="hidden" action="<%= users_url %>" method="POST">
  <label>Email <input type="text" name="user[email]"></label>
  <label>Username <input type="text" name="user[username]"></label>
  <label>Password <input type="password" name="user[password]"></label>
  <input type="submit" value="Sign Up"> -->
  <!-- # TODO password confirmation -->
</form>

<div class="featured-content">
<h2>Featured Songs</h2>
<!-- Code to load and display featured songs -->
  <ul class="featured-songs">
  <% Song.recent_top(5).each do |song| %>
    <li class="featured-song">
      <%= link_to song.title, song_url(song) %>, <%= song.recent_score %>
    </li>
  <% end %>
  </ul>

<h2>Featured Albums</h2>
<!-- Code for featured albums -->
  <ul class="featured-albums">
    <% Album.recent_top(5).each do |album| %>
      <li class="featured-song">
        <%= link_to album.title, album_url(album) %>, <%= album.recent_score %>
      </li>
    <% end %>
  </ul>

<h2>Featured Artists</h2>
<!-- Code for featured artists -->
  <ul class="featured-artists">
    <% Artist.recent_top(5).each do |artist| %>
    <li class="featured-artist">
      <%= link_to artist.name, artist_url(artist) %>, <%= artist.recent_score %>
    </li>
    <% end %>
  </ul>
</div>

<div class="recent-content">
<h2>Recent Content</h2>
<!-- Code for recent content -->
  <% recent_content = recent_content(5) %>
  <% recent_content.each do |obj| %>
    <% if obj.class == Song %>
      <%#= render "songs/mini", song: obj, artist: Artist.find(obj.artist_id) %>
    <% elsif obj.class == Artist %>
      <%#= render "artists/mini", artist: obj %>
    <% elsif obj.class == Album %>
      <%#= render "albums/mini", album: obj, artist: Artist.find(obj.artist_id) %>
    <% elsif obj.class == Note %>
      <%#= render "notes/mini", note: obj, user: User.find(obj.author_id) %>
    <% elsif obj.class == Comment %>
      <%#= render "comments/mini", comment: obj, user: User.find(obj.user_id) %>
    <% end %>
  <% end %>
</div>

<script type="application/javascript">
  <% # TODO replace this with Backbone... %>
  // $(document).ready(function() {
//     $('#login-link').click(function(event) {
//       $('#login').toggleClass("hidden");
//       $('#signup').addClass("hidden");
//     });
//
//     $('#signup-link').click(function(event) {
//       $('#login').addClass("hidden");
//       $("#signup").removeClass("hidden");
//     });
//
//     $('#signup').on("submit", function(event) {
//       $("signup").addClass("hidden");
//     });
//
//     $('#login').on("submit", function(event) {
//       $("login").addClass("hidden");
//     });
//
//
//   })
</script>
