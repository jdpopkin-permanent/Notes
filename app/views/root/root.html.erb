<h1>notes</h1>

<label> Search <input type="text" name="search[query]"> </label>

<%= link_to "Artists", artists_url %>
<%= link_to "Albums", albums_url %>
<%= link_to "Songs", songs_url %>

<% if current_user %>
  <a id="login-link" class="hidden" href="#/sign_in">Sign In</a>
  <a id="logout-link" href="#/sign_out">Log Out</a>
<% else %>
  <a id="login-link" href="#/sign_in">Sign In</a>
  <a id="logout-link" class="hidden" href="#/sign_out">Log Out</a>
<% end %>

<form id="login" class="hidden" action="<%= session_url %>" method="POST">
  <label>Username <input type="text" name="user[username]"></label>
  <label>Password <input type="password" name="user[password]"></label>
  <input type="submit" value="Sign In">
  <a id="signup-link" href="#<%#= new_user_url %>">Sign Up</a>
</form>

<form id="signup" class="hidden" action="<%= users_url %>" method="POST">
  <label>Email <input type="text" name="user[email]"></label>
  <label>Username <input type="text" name="user[username]"></label>
  <label>Password <input type="password" name="user[password]"></label>
  <input type="submit" value="Sign Up">
  <!-- # TODO password confirmation -->
</form>

<div class="featured-content">
<h2>Featured Songs</h2>
<!-- Code to load and display featured songs -->

<h2>Featured Albums</h2>
<!-- Code for featured albums -->

<h2>Featured Artists</h2>
<!-- Code for featured artists -->
</div>

<div class="recent-content">
<h2>Recent Content</h2>
<!-- Code for recent content -->
</div>

<script type="application/javascript">
  <% # TODO replace this with Backbone... %>
  $(document).ready(function() {
    $('#login-link').click(function(event) {
      $('#login').toggleClass("hidden");
      $('#signup').addClass("hidden");
    });

    $('#signup-link').click(function(event) {
      $('#login').addClass("hidden");
      $("#signup").removeClass("hidden");
    });

    $('#signup').on("submit", function(event) {
      $("signup").addClass("hidden");
    });

    $('#login').on("submit", function(event) {
      $("login").addClass("hidden");
    });

    $('#logout-link').click(function(event) {
      $.ajax({
        url: "<%= session_url %>",
        type: "post",
        dataType: "json",
        data: {"_method":"delete"}, // WARNING: SLEAZE. <%# REFACTOR %>
        success: function(data) {
          $('#login-link').removeClass("hidden");
          $('#logout-link').addClass("hidden");
        }
      });
    })
  })
</script>