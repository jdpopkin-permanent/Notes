<h1>Albums</h1>

<div id="content">
  <%# TODO: prevent default (keep an entry from being added in history) %>
  <% if current_user %>
    <a href="#albums/new">Add new album</a>
  <% end %>
</div>

<ul>
<% @albums.each do |album| %>
  <li>
    <%= link_to album.title, album_url(album) %>
  </li>
<% end %>
</ul>


<%# TODO: determine if there is any need for this at all %>
<script type="application/javascript">
  Notes.initialize("<%= root_url %>");

  <% if current_user %>
    <% id = current_user.id %>
  <% else %>
    <% id = 0 %>
  <% end %>

  Notes.currentUser = <%= id %>;

  Notes.authToken = "<%= form_authenticity_token %>"
  new Notes.Routers.AlbumsRouter($('#content'));
  Backbone.history.start();
</script>